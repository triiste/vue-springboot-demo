"use strict";(self["webpackChunkspringboot_vue_demo2"]=self["webpackChunkspringboot_vue_demo2"]||[]).push([[744],{4472:function(e,a,l){var t=l(6252),i=(0,t.aZ)({name:"Search"});const s={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},o=(0,t.Wm)("path",{fill:"currentColor",d:"m795.904 750.72 124.992 124.928a32 32 0 0 1-45.248 45.248L750.656 795.904a416 416 0 1 1 45.248-45.248zM480 832a352 352 0 1 0 0-704 352 352 0 0 0 0 704z"},null,-1);function r(e,a,l,i,r,n){return(0,t.wg)(),(0,t.j4)("svg",s,[o])}i.render=r,i.__file="packages/components/Search.vue",a["Z"]=i},4744:function(e,a,l){l.r(a),l.d(a,{default:function(){return S}});var t=l(6252);const i={style:{padding:"10px"}},s={style:{margin:"10px 0"}},o=(0,t.Uk)("新增"),r={style:{margin:"10px 0"}},n=(0,t._)("span",null,"查询",-1),d=(0,t.Uk)("成员详情"),u=(0,t.Uk)("编辑"),m=(0,t.Uk)("删除"),p={style:{margin:"10px 0"}},h={class:"dialog-footer"},g=(0,t.Uk)("确定"),c=(0,t.Uk)("取消");function f(e,a,l,f,w,b){const y=(0,t.up)("el-button"),k=(0,t.up)("el-input"),C=(0,t.up)("el-table-column"),_=(0,t.up)("el-popconfirm"),V=(0,t.up)("el-table"),W=(0,t.up)("el-pagination"),z=(0,t.up)("el-form-item"),v=(0,t.up)("el-form"),S=(0,t.up)("el-dialog");return(0,t.wg)(),(0,t.iD)("div",i,[(0,t._)("div",s,[2===this.user.role||4===this.user.role?((0,t.wg)(),(0,t.j4)(y,{key:0,type:"primary",onClick:b.add},{default:(0,t.w5)((()=>[o])),_:1},8,["onClick"])):(0,t.kq)("",!0)]),(0,t._)("div",r,[(0,t.Wm)(k,{style:{width:"20%"},modelValue:w.search,"onUpdate:modelValue":a[0]||(a[0]=e=>w.search=e),size:"large",placeholder:"请输入本室ID",clearable:""},null,8,["modelValue"]),(0,t.Wm)(y,{type:"primary",style:{"margin-left":"5px"},onClick:b.load},{default:(0,t.w5)((()=>[n])),_:1},8,["onClick"])]),(0,t.Wm)(V,{data:w.tableData,stripe:"",border:"",style:{width:"100%"}},{default:(0,t.w5)((()=>[(0,t.Wm)(C,{prop:"id",label:"ID",sortable:""}),(0,t.Wm)(C,{prop:"officename",label:"本室名称",sortable:""}),(0,t.Wm)(C,{prop:"officeuserid",label:"室主任id"}),(0,t.Wm)(C,{prop:"username",label:"室主任名称"}),(0,t.Wm)(C,{fixed:"right",label:"操作",width:"120"},{default:(0,t.w5)((e=>[(0,t.Wm)(y,{type:"primary",size:"small",onClick:a=>b.details(e.row)},{default:(0,t.w5)((()=>[d])),_:2},1032,["onClick"]),2===this.user.role?((0,t.wg)(),(0,t.j4)(y,{key:0,link:"",type:"primary",size:"small",onClick:a=>b.handleEdit(e.row)},{default:(0,t.w5)((()=>[u])),_:2},1032,["onClick"])):(0,t.kq)("",!0),(0,t.Wm)(_,{title:"确认删除吗？",onConfirm:a=>b.handleDelete(e.row.id)},{reference:(0,t.w5)((()=>[2===this.user.role?((0,t.wg)(),(0,t.j4)(y,{key:0,link:"",type:"danger",size:"small"},{default:(0,t.w5)((()=>[m])),_:1})):(0,t.kq)("",!0)])),_:2},1032,["onConfirm"])])),_:1})])),_:1},8,["data"]),(0,t._)("div",p,[(0,t.Wm)(W,{currentPage:w.currentPage,"onUpdate:currentPage":a[1]||(a[1]=e=>w.currentPage=e),"page-sizes":[5,10,20],"page-size":w.pageSize,disabled:e.disabled,layout:"total, sizes, prev, pager, next, jumper",total:w.total,onSizeChange:b.handleSizeChange,onCurrentChange:b.handleCurrentChange},null,8,["currentPage","page-size","disabled","total","onSizeChange","onCurrentChange"]),(0,t.Wm)(S,{modelValue:w.dialogVisible,"onUpdate:modelValue":a[6]||(a[6]=e=>w.dialogVisible=e),title:"提示",width:"30%"},{footer:(0,t.w5)((()=>[(0,t._)("span",h,[(0,t.Wm)(y,{type:"primary",onClick:b.save},{default:(0,t.w5)((()=>[g])),_:1},8,["onClick"]),(0,t.Wm)(y,{onClick:a[5]||(a[5]=e=>w.dialogVisible=!1)},{default:(0,t.w5)((()=>[c])),_:1})])])),default:(0,t.w5)((()=>[(0,t.Wm)(v,{model:w.form,"label-width":"120px"},{default:(0,t.w5)((()=>[(0,t.Wm)(z,{label:"本室编号"},{default:(0,t.w5)((()=>[(0,t.Wm)(k,{modelValue:w.form.id,"onUpdate:modelValue":a[2]||(a[2]=e=>w.form.id=e),style:{width:"70%"}},null,8,["modelValue"])])),_:1}),(0,t.Wm)(z,{label:"本室名称"},{default:(0,t.w5)((()=>[(0,t.Wm)(k,{modelValue:w.form.officename,"onUpdate:modelValue":a[3]||(a[3]=e=>w.form.officename=e),style:{width:"70%"}},null,8,["modelValue"])])),_:1}),(0,t.Wm)(z,{label:"室主任ID"},{default:(0,t.w5)((()=>[(0,t.Wm)(k,{modelValue:w.form.officeuserid,"onUpdate:modelValue":a[4]||(a[4]=e=>w.form.officeuserid=e),style:{width:"70%"}},null,8,["modelValue"])])),_:1})])),_:1},8,["model"])])),_:1},8,["modelValue"])])])}var w=l(9678),b=l(7692),y=l(5933),k=l(9803),C=l(3045),_=l(4472),V=l(4471),W={name:"Project",components:{Location:w.Z,Setting:b.Z,Menu:y.Z,Document:k.Z,User:C.Z,Search:_.Z},data(){return{form:{},dialogVisible:!1,search:"",user:{},currentPage:1,pageSize:10,total:0,tableData:[],flag:0}},created(){let e=localStorage.getItem("user")||"{}";this.user=JSON.parse(e),V.Z.get("/user/"+this.user.userid).then((e=>{"0"===e.code&&(this.user=e.data)})),this.load()},methods:{load(){V.Z.get("/office/test",{params:{pageNum:this.currentPage,pageSize:this.pageSize,search:this.search}}).then((e=>{this.tableData=e.data,this.total=e.total}))},add(){this.dialogVisible=!0,this.form={}},save(){this.form.id?V.Z.put("/office",this.form).then((e=>{console.log(e),"0"===e.code?this.$message({type:"success",message:"更新成功！"}):this.$message({type:"error",message:e.msg}),this.dialogVisible=!1,this.load()})):V.Z.post("/office",this.form).then((e=>{console.log(e),"0"===e.code?this.$message({type:"success",message:"新增成功！"}):this.$message({type:"error",message:e.msg}),this.load(),this.dialogVisible=!1}))},handleEdit(e){this.form=JSON.parse(JSON.stringify(e)),this.dialogVisible=!0},details(e){this.$router.push({path:"/oneofficegroup",query:{message:e.id,asd1:e.officeuserid}})},handleDelete(e){console.log(e),V.Z["delete"]("/office/"+e).then((e=>{!0===e?this.$message({type:"success",message:"删除成功！"}):this.$message({type:"error",message:"本室还有人员，不能删除！"}),this.load()}))},handleSizeChange(e){this.pageSize=e,this.load()},handleCurrentChange(e){this.currentPage=e,this.load()}}},z=l(3744);const v=(0,z.Z)(W,[["render",f]]);var S=v}}]);
//# sourceMappingURL=744.47527d92.js.map