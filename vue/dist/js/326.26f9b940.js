"use strict";(self["webpackChunkspringboot_vue_demo2"]=self["webpackChunkspringboot_vue_demo2"]||[]).push([[326],{4472:function(e,l,a){var t=a(6252),o=(0,t.aZ)({name:"Search"});const r={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},d=(0,t.Wm)("path",{fill:"currentColor",d:"m795.904 750.72 124.992 124.928a32 32 0 0 1-45.248 45.248L750.656 795.904a416 416 0 1 1 45.248-45.248zM480 832a352 352 0 1 0 0-704 352 352 0 0 0 0 704z"},null,-1);function m(e,l,a,o,m,s){return(0,t.wg)(),(0,t.j4)("svg",r,[d])}o.render=m,o.__file="packages/components/Search.vue",l["Z"]=o},9326:function(e,l,a){a.r(l),a.d(l,{default:function(){return P}});var t=a(6252);const o={style:{padding:"10px"}},r={style:{margin:"10px 0"}},d=(0,t.Uk)("新增"),m={style:{margin:"10px 0"}},s=(0,t._)("span",null,"查询",-1),i=(0,t.Uk)("成员详情"),u=(0,t.Uk)("编辑"),p=(0,t.Uk)("删除"),n={style:{margin:"10px 0"}},c={class:"dialog-footer"},h=(0,t.Uk)("确定"),f=(0,t.Uk)("取消"),g=(0,t.Uk)("% "),w=(0,t.Uk)("% "),b=(0,t.Uk)("% "),V={class:"dialog-footer"},W=(0,t.Uk)("确定"),y=(0,t.Uk)("取消");function j(e,l,a,j,k,_){const U=(0,t.up)("el-button"),v=(0,t.up)("el-input"),C=(0,t.up)("el-table-column"),I=(0,t.up)("el-popconfirm"),z=(0,t.up)("el-table"),M=(0,t.up)("el-pagination"),S=(0,t.up)("el-form-item"),D=(0,t.up)("el-option"),P=(0,t.up)("el-select"),Z=(0,t.up)("el-form"),x=(0,t.up)("el-dialog");return(0,t.wg)(),(0,t.iD)("div",o,[(0,t._)("div",r,[(0,t.Wm)(U,{type:"primary",onClick:_.add},{default:(0,t.w5)((()=>[d])),_:1},8,["onClick"])]),(0,t._)("div",m,[(0,t.Wm)(v,{style:{width:"20%"},modelValue:k.search,"onUpdate:modelValue":l[0]||(l[0]=e=>k.search=e),size:"large",placeholder:"请输入项目ID或者组长工号",clearable:""},null,8,["modelValue"]),(0,t.Wm)(U,{type:"primary",style:{"margin-left":"5px"},onClick:_.load},{default:(0,t.w5)((()=>[s])),_:1},8,["onClick"])]),(0,t.Wm)(z,{data:k.tableData,stripe:"",border:"",style:{width:"100%"}},{default:(0,t.w5)((()=>[(0,t.Wm)(C,{prop:"projectId",label:"ID",sortable:""}),(0,t.Wm)(C,{prop:"projectItemid",label:"项目编号",sortable:""}),(0,t.Wm)(C,{prop:"projectName",label:"项目名"}),(0,t.Wm)(C,{prop:"projectgroupId",label:"项目组长ID"}),(0,t.Wm)(C,{prop:"projectProgress",label:"项目进度"}),(0,t.Wm)(C,{prop:"projectType",label:"研究类别"}),(0,t.Wm)(C,{prop:"projectLevel",label:"研究级别"}),(0,t.Wm)(C,{prop:"projectMark",label:"项目积分"}),(0,t.Wm)(C,{prop:"firstMark",label:"第一阶段积分"}),(0,t.Wm)(C,{prop:"secondMark",label:"第二阶段积分"}),(0,t.Wm)(C,{prop:"threeMark",label:"第三阶段积分"}),(0,t.Wm)(C,{prop:"projectReward",label:"附加分"}),1!=this.user.role?((0,t.wg)(),(0,t.j4)(C,{key:0,fixed:"right",label:"操作",width:"120"},{default:(0,t.w5)((e=>[(0,t.Wm)(U,{type:"primary",size:"small",onClick:l=>_.details(e.row)},{default:(0,t.w5)((()=>[i])),_:2},1032,["onClick"]),2===this.user.role?((0,t.wg)(),(0,t.j4)(U,{key:0,link:"",type:"primary",size:"small",onClick:l=>_.handleEdit(e.row)},{default:(0,t.w5)((()=>[u])),_:2},1032,["onClick"])):(0,t.kq)("",!0),(0,t.Wm)(I,{title:"确认删除吗？",onConfirm:l=>_.handleDelete(e.row.projectId)},{reference:(0,t.w5)((()=>[2===this.user.role?((0,t.wg)(),(0,t.j4)(U,{key:0,link:"",type:"danger",size:"small"},{default:(0,t.w5)((()=>[p])),_:1})):(0,t.kq)("",!0)])),_:2},1032,["onConfirm"])])),_:1})):(0,t.kq)("",!0)])),_:1},8,["data"]),(0,t._)("div",n,[(0,t.Wm)(M,{currentPage:k.currentPage,"onUpdate:currentPage":l[1]||(l[1]=e=>k.currentPage=e),"page-sizes":[5,10,20],"page-size":k.pageSize,disabled:e.disabled,layout:"total, sizes, prev, pager, next, jumper",total:k.total,onSizeChange:_.handleSizeChange,onCurrentChange:_.handleCurrentChange},null,8,["currentPage","page-size","disabled","total","onSizeChange","onCurrentChange"]),(0,t.Wm)(x,{modelValue:k.dialogVisible,"onUpdate:modelValue":l[9]||(l[9]=e=>k.dialogVisible=e),title:"提示",width:"30%"},{footer:(0,t.w5)((()=>[(0,t._)("span",c,[(0,t.Wm)(U,{type:"primary",onClick:_.save},{default:(0,t.w5)((()=>[h])),_:1},8,["onClick"]),(0,t.Wm)(U,{onClick:l[8]||(l[8]=e=>k.dialogVisible=!1)},{default:(0,t.w5)((()=>[f])),_:1})])])),default:(0,t.w5)((()=>[(0,t.Wm)(Z,{model:k.form,"label-width":"120px"},{default:(0,t.w5)((()=>[(0,t.Wm)(S,{label:"项目编号"},{default:(0,t.w5)((()=>[(0,t.Wm)(v,{modelValue:k.form.projectItemid,"onUpdate:modelValue":l[2]||(l[2]=e=>k.form.projectItemid=e),style:{width:"70%"}},null,8,["modelValue"])])),_:1}),(0,t.Wm)(S,{label:"项目名称"},{default:(0,t.w5)((()=>[(0,t.Wm)(v,{modelValue:k.form.projectName,"onUpdate:modelValue":l[3]||(l[3]=e=>k.form.projectName=e),style:{width:"70%"}},null,8,["modelValue"])])),_:1}),(0,t.Wm)(S,{label:"项目组长ID"},{default:(0,t.w5)((()=>[(0,t.Wm)(v,{modelValue:k.form.projectgroupId,"onUpdate:modelValue":l[4]||(l[4]=e=>k.form.projectgroupId=e),style:{width:"70%"}},null,8,["modelValue"])])),_:1}),(0,t.Wm)(S,{label:"项目进度"},{default:(0,t.w5)((()=>[(0,t.Wm)(v,{modelValue:k.form.projectProgress,"onUpdate:modelValue":l[5]||(l[5]=e=>k.form.projectProgress=e),style:{width:"70%"}},null,8,["modelValue"])])),_:1}),(0,t.Wm)(S,{label:"研究类别"},{default:(0,t.w5)((()=>[(0,t.Wm)(P,{modelValue:k.form.projectType,"onUpdate:modelValue":l[6]||(l[6]=e=>k.form.projectType=e),style:{width:"70%"},placeholder:"请选择"},{default:(0,t.w5)((()=>[((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(k.type,(e=>((0,t.wg)(),(0,t.j4)(D,{key:e.value,label:e.label,value:e.label},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),(0,t.Wm)(S,{label:"研究级别"},{default:(0,t.w5)((()=>[(0,t.Wm)(P,{modelValue:k.form.projectLevel,"onUpdate:modelValue":l[7]||(l[7]=e=>k.form.projectLevel=e),style:{width:"70%"},placeholder:"请选择"},{default:(0,t.w5)((()=>[((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(k.level,(e=>((0,t.wg)(),(0,t.j4)(D,{key:e.value,label:e.label,value:e.label},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1})])),_:1},8,["model"])])),_:1},8,["modelValue"]),(0,t.Wm)(x,{modelValue:k.dialog,"onUpdate:modelValue":l[22]||(l[22]=e=>k.dialog=e),title:"提示",width:"30%"},{footer:(0,t.w5)((()=>[(0,t._)("span",V,[(0,t.Wm)(U,{type:"primary",onClick:_.save},{default:(0,t.w5)((()=>[W])),_:1},8,["onClick"]),(0,t.Wm)(U,{onClick:l[21]||(l[21]=e=>k.dialog=!1)},{default:(0,t.w5)((()=>[y])),_:1})])])),default:(0,t.w5)((()=>[(0,t.Wm)(Z,{model:k.form,"label-width":"120px"},{default:(0,t.w5)((()=>[(0,t.Wm)(S,{label:"项目编号"},{default:(0,t.w5)((()=>[(0,t.Wm)(v,{modelValue:k.form.projectItemid,"onUpdate:modelValue":l[10]||(l[10]=e=>k.form.projectItemid=e),disabled:"true",style:{width:"70%"}},null,8,["modelValue"])])),_:1}),(0,t.Wm)(S,{label:"项目名称"},{default:(0,t.w5)((()=>[(0,t.Wm)(v,{modelValue:k.form.projectName,"onUpdate:modelValue":l[11]||(l[11]=e=>k.form.projectName=e),disabled:"true",style:{width:"70%"}},null,8,["modelValue"])])),_:1}),(0,t.Wm)(S,{label:"项目组长ID"},{default:(0,t.w5)((()=>[(0,t.Wm)(v,{modelValue:k.form.projectgroupId,"onUpdate:modelValue":l[12]||(l[12]=e=>k.form.projectgroupId=e),disabled:"true",style:{width:"70%"}},null,8,["modelValue"])])),_:1}),(0,t.Wm)(S,{label:"项目进度"},{default:(0,t.w5)((()=>[(0,t.Wm)(v,{modelValue:k.form.projectProgress,"onUpdate:modelValue":l[13]||(l[13]=e=>k.form.projectProgress=e),style:{width:"70%"}},null,8,["modelValue"])])),_:1}),(0,t.Wm)(S,{label:"研究类别"},{default:(0,t.w5)((()=>[(0,t.Wm)(v,{modelValue:k.form.projectType,"onUpdate:modelValue":l[14]||(l[14]=e=>k.form.projectType=e),disabled:"true",style:{width:"70%"}},null,8,["modelValue"])])),_:1}),(0,t.Wm)(S,{label:"研究级别"},{default:(0,t.w5)((()=>[(0,t.Wm)(v,{modelValue:k.form.projectLevel,"onUpdate:modelValue":l[15]||(l[15]=e=>k.form.projectLevel=e),disabled:"true",style:{width:"70%"}},null,8,["modelValue"])])),_:1}),(0,t.Wm)(S,{label:"项目总积分"},{default:(0,t.w5)((()=>[(0,t.Wm)(v,{modelValue:k.form.projectMark,"onUpdate:modelValue":l[16]||(l[16]=e=>k.form.projectMark=e),disabled:"true",style:{width:"70%"}},null,8,["modelValue"])])),_:1}),(0,t.Wm)(S,{label:"第一阶段积分比"},{default:(0,t.w5)((()=>[(0,t.Wm)(v,{modelValue:k.form.first,"onUpdate:modelValue":l[17]||(l[17]=e=>k.form.first=e),style:{width:"70%"}},null,8,["modelValue"]),g])),_:1}),(0,t.Wm)(S,{label:"第二阶段积分比"},{default:(0,t.w5)((()=>[(0,t.Wm)(v,{modelValue:k.form.second,"onUpdate:modelValue":l[18]||(l[18]=e=>k.form.second=e),style:{width:"70%"}},null,8,["modelValue"]),w])),_:1}),(0,t.Wm)(S,{label:"第三阶段积分比"},{default:(0,t.w5)((()=>[(0,t.Wm)(v,{modelValue:k.form.three,"onUpdate:modelValue":l[19]||(l[19]=e=>k.form.three=e),style:{width:"70%"}},null,8,["modelValue"]),b])),_:1}),(0,t.Wm)(S,{label:"附加分"},{default:(0,t.w5)((()=>[(0,t.Wm)(v,{modelValue:k.form.projectReward,"onUpdate:modelValue":l[20]||(l[20]=e=>k.form.projectReward=e),style:{width:"70%"}},null,8,["modelValue"])])),_:1})])),_:1},8,["model"])])),_:1},8,["modelValue"])])])}var k=a(9678),_=a(7692),U=a(5933),v=a(9803),C=a(3045),I=a(4472),z=a(4471),M={name:"Project",components:{Location:k.Z,Setting:_.Z,Menu:U.Z,Document:v.Z,User:C.Z,Search:I.Z},data(){return{form:{},dialogVisible:!1,dialog:!1,search:"",user:{},currentPage:1,pageSize:10,total:0,tableData:[],type:[{label:"计划科研项目"},{label:"专项任务"}],level:[{label:"重大"},{label:"重点"},{label:"一般"}]}},created(){let e=localStorage.getItem("user")||"{}";this.user=JSON.parse(e),z.Z.get("/user/"+this.user.userid).then((e=>{"0"===e.code&&(this.user=e.data)})),this.load()},methods:{load(){z.Z.get("/project",{params:{pageNum:this.currentPage,pageSize:this.pageSize,search:this.search}}).then((e=>{console.log(e),this.tableData=e.data.records,this.total=e.data.total}))},add(){this.dialogVisible=!0,this.form={}},save(){this.form.projectId?(this.form.firstMark=this.form.first*this.form.projectMark*.01,this.form.secondMark=this.form.second*this.form.projectMark*.01,this.form.threeMark=this.form.three*this.form.projectMark*.01,z.Z.put("/project",this.form).then((e=>{console.log(e),"0"===e.code?this.$message({type:"success",message:"更新成功！"}):this.$message({type:"error",message:e.msg}),this.dialog=!1,this.load()}))):z.Z.post("/project",this.form).then((e=>{console.log(e),"0"===e.code?this.$message({type:"success",message:"新增成功！"}):this.$message({type:"error",message:e.msg}),this.load(),this.dialogVisible=!1}))},handleEdit(e){this.form=JSON.parse(JSON.stringify(e)),this.dialog=!0},details(e){this.$router.push({path:"/oneitemgroup",query:{message:e.projectId,asd1:e.firstMark,asd2:e.secondMark,asd3:e.threeMark}})},handleDelete(e){console.log(e),z.Z["delete"]("/project/"+e).then((e=>{!0===e?this.$message({type:"success",message:"删除成功！"}):this.$message({type:"error",message:"本项目还有人员，不能删除！"}),this.load()}))},handleSizeChange(e){this.pageSize=e,this.load()},handleCurrentChange(e){this.currentPage=e,this.load()}}},S=a(3744);const D=(0,S.Z)(M,[["render",j]]);var P=D}}]);
//# sourceMappingURL=326.26f9b940.js.map