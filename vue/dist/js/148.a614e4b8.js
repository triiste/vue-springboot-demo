"use strict";(self["webpackChunkspringboot_vue_demo2"]=self["webpackChunkspringboot_vue_demo2"]||[]).push([[148],{2148:function(e,l,s){s.r(l),s.d(l,{default:function(){return z}});var t=s(6252);const a={style:{padding:"10px"}},o={style:{margin:"10px 0"}},i=(0,t.Uk)("新增"),r=(0,t.Uk)("批量删除"),d=(0,t.Uk)("导入 "),m=(0,t._)("i",{class:"el-icon-bottom"},null,-1),n=(0,t.Uk)("导出 "),u=(0,t._)("i",{class:"el-icon-top"},null,-1),p=(0,t.Uk)("返回室列表"),h=(0,t.Uk)("编辑"),c=(0,t.Uk)("删除"),g=(0,t.Uk)("参与项目"),f=(0,t.Uk)("主持项目"),w={style:{margin:"10px 0"}},y=(0,t.Uk)("男"),b=(0,t.Uk)("女"),W={class:"dialog-footer"},k=(0,t.Uk)("确定"),V=(0,t.Uk)("取消");function _(e,l,s,_,C,x){const U=(0,t.up)("el-button"),S=(0,t.up)("el-popconfirm"),z=(0,t.up)("el-upload"),j=(0,t.up)("el-table-column"),$=(0,t.up)("el-table"),v=(0,t.up)("el-pagination"),q=(0,t.up)("el-input"),P=(0,t.up)("el-form-item"),D=(0,t.up)("el-radio"),Z=(0,t.up)("el-radio-group"),B=(0,t.up)("el-form"),E=(0,t.up)("el-dialog");return(0,t.wg)(),(0,t.iD)("div",a,[(0,t._)("div",o,[this.officeid===this.user.userid||2===this.user.role?((0,t.wg)(),(0,t.j4)(U,{key:0,type:"primary",onClick:x.add,class:"ml-5",style:{"margin-right":"0px"}},{default:(0,t.w5)((()=>[i])),_:1},8,["onClick"])):(0,t.kq)("",!0),(0,t.Wm)(S,{title:"确认删除吗？",onConfirm:x.delBatch},{reference:(0,t.w5)((()=>[(0,t.Wm)(U,{type:"danger",slot:"reference",style:{"margin-right":"5px"}},{default:(0,t.w5)((()=>[r])),_:1})])),_:1},8,["onConfirm"]),(0,t.Wm)(z,{action:"http://182.92.125.156:9096/user/import","show-file-list":!1,accept:"xlsx","on-success":x.handleExcelImportSuccess,style:{display:"inline-block"}},{default:(0,t.w5)((()=>[(0,t.Wm)(U,{type:"primary",class:"ml-5",style:{"margin-right":"5px"}},{default:(0,t.w5)((()=>[d,m])),_:1})])),_:1},8,["on-success"]),(0,t.Wm)(U,{type:"primary",onClick:x.exp,class:"ml-5",style:{"margin-right":"5px"}},{default:(0,t.w5)((()=>[n,u])),_:1},8,["onClick"]),(0,t.Wm)(U,{type:"primary",onClick:x.returnhere,class:"ml-5",style:{"margin-right":"5px"}},{default:(0,t.w5)((()=>[p])),_:1},8,["onClick"])]),(0,t.Wm)($,{data:C.tableData,border:"",stripe:"","header-cell-class-name":C.headerBg,onSelectionChange:x.handleSelectionChange},{default:(0,t.w5)((()=>[(0,t.Wm)(j,{type:"selection",width:"55"}),(0,t.Wm)(j,{prop:"userid",label:"ID",sortable:""}),(0,t.Wm)(j,{prop:"userjobid",label:"工号",sortable:""}),(0,t.Wm)(j,{prop:"username",label:"用户名"}),(0,t.Wm)(j,{prop:"telephone",label:"电话"}),(0,t.Wm)(j,{prop:"age",label:"年龄"}),(0,t.Wm)(j,{prop:"sex",label:"性别"}),(0,t.Wm)(j,{prop:"address",label:"地址"}),(0,t.Wm)(j,{prop:"position",label:"职位"}),(0,t.Wm)(j,{prop:"permission",label:"部门"}),(0,t.Wm)(j,{prop:"mark",label:"研究室奖励积分"}),this.officeid===this.user.userid?((0,t.wg)(),(0,t.j4)(j,{key:0,fixed:"right",label:"操作",width:"120"},{default:(0,t.w5)((e=>[this.officeid===this.user.userid||2===this.user.role?((0,t.wg)(),(0,t.j4)(U,{key:0,link:"",type:"primary",size:"small",onClick:l=>x.handleEdit(e.row)},{default:(0,t.w5)((()=>[h])),_:2},1032,["onClick"])):(0,t.kq)("",!0),(0,t.Wm)(S,{title:"确认删除吗？",onConfirm:l=>x.handleDelete(e.row.userid)},{reference:(0,t.w5)((()=>[this.officeid===this.user.userid||2===this.user.role?((0,t.wg)(),(0,t.j4)(U,{key:0,link:"",type:"danger",size:"small"},{default:(0,t.w5)((()=>[c])),_:1})):(0,t.kq)("",!0)])),_:2},1032,["onConfirm"])])),_:1})):(0,t.kq)("",!0),(0,t.Wm)(j,{fixed:"right",label:"项目管理",width:"120"},{default:(0,t.w5)((e=>[(0,t.Wm)(U,{type:"primary",onClick:l=>x.join(e.row),style:{"margin-left":"2px","margin-bottom":"2px"}},{default:(0,t.w5)((()=>[g])),_:2},1032,["onClick"]),(0,t.Wm)(U,{type:"primary",onClick:l=>x.host(e.row),style:{"margin-left":"2px"}},{default:(0,t.w5)((()=>[f])),_:2},1032,["onClick"])])),_:1})])),_:1},8,["data","header-cell-class-name","onSelectionChange"]),(0,t._)("div",w,[(0,t.Wm)(v,{currentPage:C.currentPage,"onUpdate:currentPage":l[0]||(l[0]=e=>C.currentPage=e),"page-sizes":[5,10,20],"page-size":C.pageSize,disabled:e.disabled,layout:"total, sizes, prev, pager, next, jumper",total:C.total,onSizeChange:x.handleSizeChange,onCurrentChange:x.handleCurrentChange},null,8,["currentPage","page-size","disabled","total","onSizeChange","onCurrentChange"]),(0,t.Wm)(E,{modelValue:C.dialogVisible,"onUpdate:modelValue":l[12]||(l[12]=e=>C.dialogVisible=e),title:"提示",width:"30%"},{footer:(0,t.w5)((()=>[(0,t._)("span",W,[(0,t.Wm)(U,{type:"primary",onClick:x.save},{default:(0,t.w5)((()=>[k])),_:1},8,["onClick"]),(0,t.Wm)(U,{onClick:l[11]||(l[11]=e=>C.dialogVisible=!1)},{default:(0,t.w5)((()=>[V])),_:1})])])),default:(0,t.w5)((()=>[(0,t.Wm)(B,{model:C.form,"label-width":"120px"},{default:(0,t.w5)((()=>[(0,t.Wm)(P,{label:"所属科室"},{default:(0,t.w5)((()=>[(0,t.Wm)(q,{modelValue:C.form.officeid,"onUpdate:modelValue":l[1]||(l[1]=e=>C.form.officeid=e),style:{width:"70%"},disabled:""},null,8,["modelValue"])])),_:1}),(0,t.Wm)(P,{label:"工号"},{default:(0,t.w5)((()=>[(0,t.Wm)(q,{modelValue:C.form.userjobid,"onUpdate:modelValue":l[2]||(l[2]=e=>C.form.userjobid=e),style:{width:"70%"}},null,8,["modelValue"])])),_:1}),(0,t.Wm)(P,{label:"用户名"},{default:(0,t.w5)((()=>[(0,t.Wm)(q,{modelValue:C.form.username,"onUpdate:modelValue":l[3]||(l[3]=e=>C.form.username=e),style:{width:"70%"}},null,8,["modelValue"])])),_:1}),(0,t.Wm)(P,{label:"电话"},{default:(0,t.w5)((()=>[(0,t.Wm)(q,{modelValue:C.form.telephone,"onUpdate:modelValue":l[4]||(l[4]=e=>C.form.telephone=e),style:{width:"70%"}},null,8,["modelValue"])])),_:1}),(0,t.Wm)(P,{label:"年龄"},{default:(0,t.w5)((()=>[(0,t.Wm)(q,{modelValue:C.form.age,"onUpdate:modelValue":l[5]||(l[5]=e=>C.form.age=e),style:{width:"70%"}},null,8,["modelValue"])])),_:1}),(0,t.Wm)(P,{label:"性别"},{default:(0,t.w5)((()=>[(0,t.Wm)(Z,{modelValue:C.form.sex,"onUpdate:modelValue":l[6]||(l[6]=e=>C.form.sex=e)},{default:(0,t.w5)((()=>[(0,t.Wm)(D,{label:"男",size:"large"},{default:(0,t.w5)((()=>[y])),_:1}),(0,t.Wm)(D,{label:"女",size:"large"},{default:(0,t.w5)((()=>[b])),_:1})])),_:1},8,["modelValue"])])),_:1}),(0,t.Wm)(P,{label:"地址"},{default:(0,t.w5)((()=>[(0,t.Wm)(q,{type:"textarea",modelValue:C.form.address,"onUpdate:modelValue":l[7]||(l[7]=e=>C.form.address=e),style:{width:"70%"}},null,8,["modelValue"])])),_:1}),(0,t.Wm)(P,{label:"职位"},{default:(0,t.w5)((()=>[(0,t.Wm)(q,{modelValue:C.form.position,"onUpdate:modelValue":l[8]||(l[8]=e=>C.form.position=e),style:{width:"70%"}},null,8,["modelValue"])])),_:1}),(0,t.Wm)(P,{label:"部门"},{default:(0,t.w5)((()=>[(0,t.Wm)(q,{type:"textarea",modelValue:C.form.permission,"onUpdate:modelValue":l[9]||(l[9]=e=>C.form.permission=e),style:{width:"70%"}},null,8,["modelValue"])])),_:1}),(0,t.Wm)(P,{label:"研究室奖励积分"},{default:(0,t.w5)((()=>[(0,t.Wm)(q,{type:"number",modelValue:C.form.mark,"onUpdate:modelValue":l[10]||(l[10]=e=>C.form.mark=e),style:{width:"70%"}},null,8,["modelValue"])])),_:1})])),_:1},8,["model"])])),_:1},8,["modelValue"])])])}var C=s(4471),x={name:"User",components:{},data(){return{form:{},asd1:0,dialogVisible:!1,search:"",user:{},importaddress:"",currentPage:1,pageSize:10,total:0,headerBg:"headerBg",tableData:[],officeid:0,exportaddress:"",multipleSelection:[]}},created(){let e=localStorage.getItem("user")||"{}";this.user=JSON.parse(e),this.message1=this.$route.query.message,this.asd1=this.$route.query.asd1,this.importaddress="http://localhost:9090/user/import?officeid="+this.message1,C.Z.get("/user/"+this.user.userid).then((e=>{"0"===e.code&&(this.user=e.data)})),console.log("我倒要看看此时的asd1"+this.asd1+"看看此数据的类型"+typeof this.asd1),this.officeid=1*this.asd1,console.log(typeof this.officeid),this.search=this.message1,this.load()},methods:{exp(){this.exportaddress="http://182.92.125.156:9096/user/export?userid="+this.message1,window.open(this.exportaddress)},load(){C.Z.get("/user",{params:{pageNum:this.currentPage,pageSize:this.pageSize,search:this.search}}).then((e=>{console.log(e),this.tableData=e.data.records,this.total=e.data.total})),console.log(this.form)},join(e){this.$router.push({path:"/officejoinproject",query:{jmessage:e.userid,message:this.message1}})},returnhere(){this.$router.push({path:"/officeperson"})},delBatch(){let e=this.multipleSelection.map((e=>e.userid));console.log("看看选中的id"+e),C.Z.post("/user/del/batch",e).then((e=>{e?(this.$message.success("批量删除成功"),this.load()):this.$message.error("批量删除失败")}))},handleExcelImportSuccess(){this.$message.success("导入成功"),this.load()},host(e){this.$router.push({path:"/officehostproject",query:{userid:e.userid,message:this.message1}})},add(){this.dialogVisible=!0,this.form={},this.form.officeid=this.message1},save(){this.form.userid?C.Z.put("/user",this.form).then((e=>{console.log(e),"0"===e.code?this.$message({type:"success",message:"更新成功！"}):this.$message({type:"error",message:e.msg}),this.load(),this.dialogVisible=!1})):C.Z.post("/user",this.form).then((e=>{console.log(e),"0"===e.code?this.$message({type:"success",message:"新增成功！"}):this.$message({type:"error",message:e.msg}),this.load(),this.dialogVisible=!1}))},handleEdit(e){this.form=JSON.parse(JSON.stringify(e)),this.dialogVisible=!0},handleSelectionChange(e){this.multipleSelection=e},handleDelete(e){console.log(e),C.Z["delete"]("/user/"+e).then((e=>{"0"===e.code?this.$message({type:"success",message:"删除成功！"}):this.$message({type:"error",message:e.msg}),this.load()}))},handleSizeChange(e){this.pageSize=e,this.load()},handleCurrentChange(e){this.currentPage=e,this.load()}}},U=s(3744);const S=(0,U.Z)(x,[["render",_]]);var z=S}}]);
//# sourceMappingURL=148.a614e4b8.js.map