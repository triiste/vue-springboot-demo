"use strict";(self["webpackChunkspringboot_vue_demo2"]=self["webpackChunkspringboot_vue_demo2"]||[]).push([[865],{865:function(e,l,a){a.r(l),a.d(l,{default:function(){return W}});var t=a(6252);const o={style:{padding:"10px"}},r={style:{margin:"10px 0"}},s=(0,t.Uk)("新增"),i={key:0,style:{margin:"10px 0"}},d=(0,t.Uk)("查询"),m={key:0,style:{color:"red"}},n={key:1,style:{color:"blue"}},u=(0,t.Uk)("编辑"),p=(0,t.Uk)("删除"),h={style:{margin:"10px 0"}},g={class:"dialog-footer"},c=(0,t.Uk)("确定"),f=(0,t.Uk)("取消");function w(e,l,a,w,b,y){const k=(0,t.up)("el-button"),V=(0,t.up)("el-input"),W=(0,t.up)("el-table-column"),C=(0,t.up)("el-popconfirm"),_=(0,t.up)("el-table"),D=(0,t.up)("el-pagination"),z=(0,t.up)("el-form-item"),j=(0,t.up)("el-form"),U=(0,t.up)("el-dialog");return(0,t.wg)(),(0,t.iD)("div",o,[(0,t._)("div",r,[1!==this.user.role?((0,t.wg)(),(0,t.j4)(k,{key:0,type:"primary",onClick:y.add},{default:(0,t.w5)((()=>[s])),_:1},8,["onClick"])):(0,t.kq)("",!0)]),1!==this.user.role&&2!==this.user.role?((0,t.wg)(),(0,t.iD)("div",i,[(0,t.Wm)(V,{style:{width:"20%"},modelValue:b.search,"onUpdate:modelValue":l[0]||(l[0]=e=>b.search=e),size:"large",placeholder:"请输入用户ID或者项目ID",clearable:""},null,8,["modelValue"]),(0,t.Wm)(k,{type:"primary",style:{"margin-left":"5px"},onClick:y.load},{default:(0,t.w5)((()=>[d])),_:1},8,["onClick"])])):(0,t.kq)("",!0),(0,t.Wm)(_,{data:b.tableData,stripe:"",border:"",style:{width:"100%"}},{default:(0,t.w5)((()=>[(0,t.Wm)(W,{prop:"id",label:"ID",sortable:""}),(0,t.Wm)(W,{prop:"projectid",label:"项目ID",sortable:""}),(0,t.Wm)(W,{prop:"userid",label:"用户ID"}),(0,t.Wm)(W,{prop:"mark",label:"积分"}),(0,t.Wm)(W,{prop:"handler",label:"操作员"}),(0,t.Wm)(W,{prop:"projectProgress",label:"项目进程"}),(0,t.Wm)(W,{prop:"officeDirector",label:"室主任确认情况"}),(0,t.Wm)(W,{prop:"scientific",label:"科研处确认情况"},{default:(0,t.w5)((e=>[0===e.row.scientific?((0,t.wg)(),(0,t.iD)("span",m,"科研处未确认")):(0,t.kq)("",!0),1===e.row.scientific?((0,t.wg)(),(0,t.iD)("span",n,"科研处已确认")):(0,t.kq)("",!0)])),_:1}),1!==this.user.role?((0,t.wg)(),(0,t.j4)(W,{key:0,fixed:"right",label:"操作",width:"120"},{default:(0,t.w5)((e=>[(0,t.Wm)(k,{link:"",type:"primary",size:"small",onClick:l=>y.handleEdit(e.row)},{default:(0,t.w5)((()=>[u])),_:2},1032,["onClick"]),(0,t.Wm)(C,{title:"确认删除吗？",onConfirm:l=>y.handleDelete(e.row.id)},{reference:(0,t.w5)((()=>[(0,t.Wm)(k,{link:"",type:"danger",size:"small"},{default:(0,t.w5)((()=>[p])),_:1})])),_:2},1032,["onConfirm"])])),_:1})):(0,t.kq)("",!0)])),_:1},8,["data"]),(0,t._)("div",h,[(0,t.Wm)(D,{currentPage:b.currentPage,"onUpdate:currentPage":l[1]||(l[1]=e=>b.currentPage=e),"page-sizes":[5,10,20],"page-size":b.pageSize,disabled:e.disabled,layout:"total, sizes, prev, pager, next, jumper",total:b.total,onSizeChange:y.handleSizeChange,onCurrentChange:y.handleCurrentChange},null,8,["currentPage","page-size","disabled","total","onSizeChange","onCurrentChange"]),(0,t.Wm)(U,{modelValue:b.dialogVisible,"onUpdate:modelValue":l[9]||(l[9]=e=>b.dialogVisible=e),title:"提示",width:"30%"},{footer:(0,t.w5)((()=>[(0,t._)("span",g,[(0,t.Wm)(k,{type:"primary",onClick:y.save},{default:(0,t.w5)((()=>[c])),_:1},8,["onClick"]),(0,t.Wm)(k,{onClick:l[8]||(l[8]=e=>b.dialogVisible=!1)},{default:(0,t.w5)((()=>[f])),_:1})])])),default:(0,t.w5)((()=>[(0,t.Wm)(j,{model:b.form,"label-width":"120px"},{default:(0,t.w5)((()=>[2===this.user.role?((0,t.wg)(),(0,t.j4)(z,{key:0,label:"项目ID"},{default:(0,t.w5)((()=>[(0,t.Wm)(V,{modelValue:b.form.projectid,"onUpdate:modelValue":l[2]||(l[2]=e=>b.form.projectid=e),style:{width:"70%"},disabled:""},null,8,["modelValue"])])),_:1})):(0,t.kq)("",!0),2!==this.user.role?((0,t.wg)(),(0,t.j4)(z,{key:1,label:"项目ID"},{default:(0,t.w5)((()=>[(0,t.Wm)(V,{modelValue:b.form.projectid,"onUpdate:modelValue":l[3]||(l[3]=e=>b.form.projectid=e),style:{width:"70%"}},null,8,["modelValue"])])),_:1})):(0,t.kq)("",!0),(0,t.Wm)(z,{label:"用户ID"},{default:(0,t.w5)((()=>[(0,t.Wm)(V,{modelValue:b.form.userid,"onUpdate:modelValue":l[4]||(l[4]=e=>b.form.userid=e),style:{width:"70%"}},null,8,["modelValue"])])),_:1}),(0,t.Wm)(z,{label:"个人积分"},{default:(0,t.w5)((()=>[(0,t.Wm)(V,{modelValue:b.form.mark,"onUpdate:modelValue":l[5]||(l[5]=e=>b.form.mark=e),style:{width:"70%"}},null,8,["modelValue"])])),_:1}),(0,t.Wm)(z,{label:"操作员"},{default:(0,t.w5)((()=>[(0,t.Wm)(V,{modelValue:b.form.handler,"onUpdate:modelValue":l[6]||(l[6]=e=>b.form.handler=e),style:{width:"70%"}},null,8,["modelValue"])])),_:1}),(0,t.Wm)(z,{label:"项目进度"},{default:(0,t.w5)((()=>[(0,t.Wm)(V,{modelValue:b.form.projectProgress,"onUpdate:modelValue":l[7]||(l[7]=e=>b.form.projectProgress=e),style:{width:"70%"}},null,8,["modelValue"])])),_:1})])),_:1},8,["model"])])),_:1},8,["modelValue"])])])}var b=a(4471),y={name:"Group",components:{},data(){return{form:{},dialogVisible:!1,search:"",user:{},projectid1:"",currentPage:1,pageSize:10,total:0,tableData:[]}},created(){let e=localStorage.getItem("user")||"{}";this.user=JSON.parse(e),b.Z.get("/user/"+this.user.userid).then((e=>{"0"===e.code&&(this.user=e.data)})),this.load()},methods:{load(){b.Z.get("/group",{params:{pageNum:this.currentPage,pageSize:this.pageSize,search:this.search}}).then((e=>{console.log(e),this.tableData=e.data.records,this.total=e.data.total}))},add(){this.dialogVisible=!0,this.form={},this.form.projectid=this.search},save(){this.form.id?b.Z.put("/group",this.form).then((e=>{console.log(e),"0"===e.code?this.$message({type:"success",message:"更新成功！"}):this.$message({type:"error",message:e.msg}),this.load(),this.dialogVisible=!1})):b.Z.post("/group",this.form).then((e=>{"0"===e.code?this.$message({type:"success",message:"新增成功！"}):this.$message({type:"error",message:e.msg}),this.load(),this.dialogVisible=!1}))},handleEdit(e){this.form=JSON.parse(JSON.stringify(e)),this.dialogVisible=!0},handleDelete(e){console.log(e),b.Z["delete"]("/group/"+e).then((e=>{"0"===e.code?this.$message({type:"success",message:"删除成功！"}):this.$message({type:"error",message:e.msg}),this.load()}))},handleSizeChange(e){this.pageSize=e,this.load()},handleCurrentChange(e){this.currentPage=e,this.load()}}},k=a(3744);const V=(0,k.Z)(y,[["render",w]]);var W=V}}]);
//# sourceMappingURL=865.ade71c90.js.map